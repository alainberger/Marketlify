<!doctype html>
<html lang="fr" data-theme="light">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>MarketLify ‚Äî Billetterie</title>
  <meta name="description" content="MarketLify : billetterie moderne pour concerts, spectacles, festivals et sports." />
  <meta name="theme-color" content="#0aaeef" />
  <style>
    /* ===== Design tokens (originaux) ===== */
    :root{
      --brand-50:#ecfbff; --brand-100:#d7f5ff; --brand-200:#b9ecff; --brand-300:#8fe0ff;
      --brand-400:#5dd2fb; --brand-500:#21c1f3; --brand-600:#0aaeef; --brand-700:#078fc2;
      --brand:#0aaeef; --accent:#7a5cf0; --ok:#16a34a; --warn:#f59e0b; --danger:#ef4444;
      --bg:#ffffff; --ink:#0b1220; --muted:#475569; --panel:#f8fafc; --line:#e2e8f0;
      --radius:12px; --shadow:0 10px 30px rgba(0,0,0,.08);
    }
    [data-theme="dark"]{
      --bg:#0b1220; --ink:#e5e7eb; --muted:#9ca3af; --panel:#0f172a; --line:#1f2937;
      --shadow:0 12px 34px rgba(0,0,0,.35);
    }
    *{box-sizing:border-box}
    html,body{margin:0}
    body{font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial; background:linear-gradient(180deg,var(--bg),var(--panel)); color:var(--ink)}
    a{color:inherit;text-decoration:none}
    img{max-width:100%;display:block}
    .container{max-width:1280px;margin:0 auto;padding:0 16px}
    .sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}
    .btn{display:inline-flex;align-items:center;gap:8px;padding:10px 14px;border-radius:10px;border:1px solid var(--line);background:#fff}
    [data-theme="dark"] .btn{background:#0b1220}
    .btn--ghost{background:transparent}
    .btn--brand{background:linear-gradient(180deg,var(--brand-400),var(--brand-600));color:#001018;border-color:transparent}
    .chip{padding:6px 10px;border:1px solid var(--line);border-radius:999px;background:transparent}

    /* ===== Header √©tage 1 (utilitaires) ===== */
    .topbar{background:var(--panel);border-bottom:1px solid var(--line);font-size:13px}
    .topbar__row{height:36px;display:flex;align-items:center;justify-content:space-between;gap:12px}
    .topbar__left,.topbar__right{display:flex;align-items:center;gap:12px}
    .select{display:flex;align-items:center;gap:6px;border:1px solid var(--line);padding:4px 8px;border-radius:8px;background:#fff}
    [data-theme="dark"] .select{background:#0b1220}
    .select select{all:unset;font-size:13px}

    /* ===== Header √©tage 2 (principal) ===== */
    .mainbar{position:sticky;top:0;z-index:50;background:rgba(255,255,255,.9);border-bottom:1px solid var(--line);backdrop-filter:blur(10px)}
    [data-theme="dark"] .mainbar{background:rgba(11,18,32,.75)}
    .mainbar__row{height:72px;display:flex;align-items:center;gap:12px}
    .brand{display:flex;align-items:center;gap:10px}
    .brand__logo{width:36px;height:36px;border-radius:10px;background:conic-gradient(from 180deg,var(--brand),#22d3ee,var(--accent),var(--brand));box-shadow:var(--shadow)}
    .brand__wordmark{position:relative;display:inline-flex;flex-direction:column;align-items:center;line-height:1}
    .brand__name{font-weight:900;letter-spacing:.2px}
    /* ‚Äî‚Äî Chevron original sous le mot-symbole ‚Äî‚Äî */
    .brand__chevron{
      width:56%; height:3px; margin-top:3px; border-radius:999px;
      background:linear-gradient(90deg,var(--brand),var(--accent));
      position:relative; transform-origin:center; transition:transform .15s ease, filter .15s ease;
      filter:drop-shadow(0 1px 0 rgba(0,0,0,.08));
    }
    /* petites pointes pour un effet chevron, sans copier personne */
    .brand__chevron::before,.brand__chevron::after{
      content:""; position:absolute; top:-3px; width:8px; height:8px; border-radius:2px;
      transform:rotate(45deg);
      background:linear-gradient(135deg,var(--brand),var(--accent));
      opacity:.9;
    }
    .brand__chevron::before{left:-2px}
    .brand__chevron::after{right:-2px}
    .brand:hover .brand__chevron,
    .brand:focus-within .brand__chevron{ transform:translateY(2px) scaleX(1.05) }

    /* ===== Mega menu + recherche ===== */
    .mega-btn{display:flex;align-items:center;gap:8px;padding:10px 12px;border:1px solid var(--line);border-radius:10px;background:var(--panel)}
    .mega{position:absolute;left:16px;right:16px;top:72px;background:var(--bg);border:1px solid var(--line);border-radius:14px;box-shadow:var(--shadow);padding:14px;display:none}
    .mega.open{display:block}
    .mega__grid{display:grid;grid-template-columns:repeat(5,1fr);gap:12px}
    .mega__col{border:1px solid var(--line);border-radius:12px;padding:10px;background:var(--panel)}
    .mega__title{margin:.2rem 0 .5rem;font-size:14px;color:var(--muted);font-weight:700}
    .mega a{display:flex;justify-content:space-between;align-items:center;padding:8px;border-radius:8px}
    .mega a:hover{background:rgba(0,0,0,.04)}
    [data-theme="dark"] .mega a:hover{background:rgba(255,255,255,.06)}

    .search{flex:1;display:flex;align-items:stretch;gap:0}
    .search__cat{border:1px solid var(--line);border-right:none;border-radius:10px 0 0 10px;padding:0 10px;background:var(--panel)}
    .search__cat select{all:unset;font-size:14px}
    .search__input{flex:1;border:1px solid var(--line);border-left:none;border-right:none;background:#fff;padding:0 12px}
    [data-theme="dark"] .search__input{background:#0b1220;color:inherit}
    .search__input input{all:unset;width:100%;height:44px}
    .search__btn{border:1px solid var(--line);border-left:none;border-radius:0 10px 10px 0;background:linear-gradient(180deg,var(--brand-400),var(--brand-600));color:#001018;padding:0 14px;display:flex;align-items:center;font-weight:700}

    /* ===== Liens compte / retours / panier ===== */
    .quick{display:flex;align-items:center;gap:10px}
    .quick__item{display:flex;flex-direction:column;align-items:flex-start;line-height:1}
    .quick__hint{font-size:12px;color:var(--muted)}
    .cart-btn{position:relative}
    .cart-badge{position:absolute;top:-6px;right:-6px;background:var(--ok);color:#fff;font-size:12px;min-width:20px;height:20px;border-radius:999px;display:flex;align-items:center;justify-content:center;padding:0 6px}

    /* ===== Bandeaux & sections ‚Äúvivants‚Äù ===== */
    .strip{border-top:1px solid var(--line);border-bottom:1px solid var(--line);background:linear-gradient(90deg,var(--brand-50),transparent)}
    [data-theme="dark"] .strip{background:linear-gradient(90deg,rgba(122,92,240,.12),transparent)}
    .strip__row{display:flex;gap:12px;overflow:auto;scroll-snap-type:x mandatory;padding:10px 16px}
    .deal{min-width:240px;scroll-snap-align:start;border:1px solid var(--line);border-radius:12px;padding:10px;background:var(--panel)}
    .deal__title{margin:.2rem 0 .3rem}
    .grid{display:grid;gap:14px;grid-template-columns:repeat(12,1fr)}
    .card{grid-column:span 3;border:1px solid var(--line);border-radius:14px;overflow:hidden;background:var(--bg);box-shadow:var(--shadow)}
    .card__media{height:160px;background:linear-gradient(135deg,#eef, #fef)}
    .card__body{padding:12px}
    .price{font-weight:900}
    .old{color:var(--muted);text-decoration:line-through;margin-left:6px}
    .cta{display:flex;gap:8px;margin-top:8px}
    .badge{font-size:12px;border:1px solid var(--line);border-radius:999px;padding:2px 8px}

    .footer{margin:24px 0;text-align:center;color:var(--muted);font-size:14px}

    /* ===== Responsive ===== */
    @media (max-width:1200px){ .mega__grid{grid-template-columns:repeat(4,1fr)} .card{grid-column:span 4} }
    @media (max-width:900px){
      .mainbar__row{flex-wrap:wrap;height:auto;padding:10px 0}
      .search{order:3;width:100%}
      .mega{left:0;right:0}
    }
    @media (max-width:680px){
      .card{grid-column:span 6}
      .quick{gap:6px}
      .topbar__row{justify-content:center}
    }
    @media (max-width:460px){
      .card{grid-column:span 12}
      .brand__name{font-size:18px}
      .brand__chevron{height:2px}
    }
  </style>
</head>
<body>
  <a class="sr-only" href="#main">Aller au contenu</a>

  <!-- ===== Header √ât. 1 : utilitaires ===== -->
  <div class="topbar">
    <div class="container topbar__row">
      <div class="topbar__left">
        <div class="select" aria-label="Choisir votre lieu">
          <span aria-hidden="true">üìç</span>
          <select id="place">
            <option>France</option><option>Belgique</option><option>Suisse</option><option>Canada</option>
          </select>
        </div>
        <div class="select" aria-label="Choisir la devise">
          <span aria-hidden="true">üí∂</span>
          <select id="currency">
            <option>EUR ‚Ç¨</option><option>CHF Fr.</option><option>USD $</option><option>CAD $</option>
          </select>
        </div>
        <div class="select" aria-label="Langue">
          <span aria-hidden="true">üåê</span>
          <select id="lang">
            <option>FR</option><option>EN</option>
          </select>
        </div>
      </div>
      <div class="topbar__right">
        <a href="#" class="chip">Aide</a>
        <a href="#" class="chip">Carte cadeau</a>
        <button id="theme" class="chip" aria-pressed="false">üåì Th√®me</button>
      </div>
    </div>
  </div>

  <!-- ===== Header √ât. 2 : principal ===== -->
  <header class="mainbar" role="banner">
    <div class="container mainbar__row">
      <!-- Logo + chevron original -->
      <a class="brand" href="/" aria-label="Accueil MarketLify">
        <span class="brand__logo" aria-hidden="true"></span>
        <span class="brand__wordmark">
          <span class="brand__name">MarketLify</span>
          <span class="brand__chevron" aria-hidden="true"></span>
        </span>
      </a>

      <!-- Bouton Mega -->
      <button id="megaBtn" class="mega-btn" aria-expanded="false" aria-controls="mega">
        ‚ò∞ Cat√©gories
      </button>

      <!-- Recherche centrale -->
      <form id="searchForm" class="search" role="search" aria-label="Recherche d‚Äô√©v√©nements">
        <div class="search__cat">
          <label class="sr-only" for="cat">Cat√©gorie</label>
          <select id="cat" name="cat">
            <option value="">Tous</option>
            <option>Concerts</option><option>Th√©√¢tre</option><option>Humour</option>
            <option>Sport</option><option>Famille</option><option>√âlectro</option>
          </select>
        </div>
        <div class="search__input">
          <label class="sr-only" for="q">Recherche</label>
          <input id="q" name="q" type="search" placeholder="Artiste, √©v√©nement, lieu‚Ä¶" autocomplete="off" />
        </div>
        <button class="search__btn" type="submit" title="Rechercher">üîé Rechercher</button>
      </form>

      <!-- Compte / retours / panier -->
      <div class="quick" aria-label="Acc√®s rapide">
        <a href="#" class="quick__item">
          <span class="quick__hint">Bonjour, connectez-vous</span>
          <strong>Compte</strong>
        </a>
        <a href="#" class="quick__item">
          <span class="quick__hint">Suivi</span>
          <strong>Retours & commandes</strong>
        </a>
        <button id="cartBtn" class="btn cart-btn" aria-label="Panier">
          üõí Panier <span id="cartBadge" class="cart-badge" aria-live="polite">0</span>
        </button>
      </div>
    </div>

    <!-- M√©ga-menu -->
    <div id="mega" class="mega" role="dialog" aria-modal="false" aria-label="Cat√©gories">
      <div class="mega__grid">
        <div class="mega__col">
          <div class="mega__title">Concerts</div>
          <a href="#">Pop <span>‚Üí</span></a>
          <a href="#">Rock <span>‚Üí</span></a>
          <a href="#">Rap <span>‚Üí</span></a>
          <a href="#">√âlectro <span>‚Üí</span></a>
        </div>
        <div class="mega__col">
          <div class="mega__title">Spectacles</div>
          <a href="#">Th√©√¢tre <span>‚Üí</span></a>
          <a href="#">Humour <span>‚Üí</span></a>
          <a href="#">Famille <span>‚Üí</span></a>
          <a href="#">Com√©dies musicales <span>‚Üí</span></a>
        </div>
        <div class="mega__col">
          <div class="mega__title">Sports</div>
          <a href="#">Football <span>‚Üí</span></a>
          <a href="#">Basket <span>‚Üí</span></a>
          <a href="#">Sports urbains <span>‚Üí</span></a>
          <a href="#">Sports motors <span>‚Üí</span></a>
        </div>
        <div class="mega__col">
          <div class="mega__title">Par ville</div>
          <a href="#">Paris <span>‚Üí</span></a>
          <a href="#">Lyon <span>‚Üí</span></a>
          <a href="#">Marseille <span>‚Üí</span></a>
          <a href="#">Toulouse <span>‚Üí</span></a>
        </div>
        <div class="mega__col">
          <div class="mega__title">Offres</div>
          <a href="#">Derni√®re minute <span>‚Üí</span></a>
          <a href="#">Moins de 50 ‚Ç¨ <span>‚Üí</span></a>
          <a href="#">Tr√®s demand√©s <span>‚Üí</span></a>
          <a href="#">Nouveaut√©s <span>‚Üí</span></a>
        </div>
      </div>
    </div>
  </header>

  <!-- ===== Bandeau ‚Äúoffres du jour‚Äù vivant ===== -->
  <section class="strip" aria-label="Offres du jour">
    <div class="strip__row container">
      <div class="deal">
        <div class="badge">-15% nouveau client</div>
        <h3 class="deal__title">Pack duo Pop Night</h3>
        <p class="muted">Deux billets + boisson offerte</p>
      </div>
      <div class="deal">
        <div class="badge">Tr√®s demand√©</div>
        <h3 class="deal__title">Rap √âCLIPSE ‚Ä¢ Paris</h3>
        <p class="muted">Ce week-end ‚Äî reste peu de places</p>
      </div>
      <div class="deal">
        <div class="badge">Familial</div>
        <h3 class="deal__title">Cirque Borealis</h3>
        <p class="muted">Tarif enfant disponible</p>
      </div>
      <div class="deal">
        <div class="badge">√âlectro</div>
        <h3 class="deal__title">Pulse Festival ‚Ä¢ Nice</h3>
        <p class="muted">Pass jour ‚Äì Economisez 12 ‚Ç¨</p>
      </div>
    </div>
  </section>

  <main id="main" class="container" style="padding:18px 0">
    <h2 style="margin:.2rem 0 1rem">Recommand√©s pour vous</h2>
    <section class="grid" id="cards" aria-live="polite"></section>
  </main>

  <footer class="footer">
    ¬© <span id="year"></span> MarketLify ‚Äî Tous droits r√©serv√©s ¬∑ <a href="#">CGV</a> ¬∑ <a href="#">Confidentialit√©</a> ¬∑ <a href="#">Cookies</a>
  </footer>

  <script>
  // ===== Petit √©tat pour ‚Äúvivant‚Äù (sans copier qui que ce soit) =====
  const $ = (s,p=document)=>p.querySelector(s);
  const $$ = (s,p=document)=>[...p.querySelectorAll(s)];
  const euro = n => (new Intl.NumberFormat('fr-FR',{style:'currency',currency:($('#currency')?.value?.includes('USD')?'USD':$('#currency')?.value?.includes('CAD')?'CAD':$('#currency')?.value?.includes('CHF')?'CHF':'EUR')})).format(n);

  // Jeux d‚Äô√©v√©nements (exemples originaux)
  const EVENTS = [
    {id:'e1',title:'Aurora Nova Tour',artist:'LUNA√è',city:'Paris',genre:'Pop',when:'2025-10-12 20:00',price:89,cut:109},
    {id:'e2',title:'Rock Surge',artist:'Volt Riders',city:'Lyon',genre:'Rock',when:'2025-09-28 19:30',price:55,cut:79},
    {id:'e3',title:'Flowstate',artist:'MIRA',city:'Marseille',genre:'√âlectro',when:'2025-11-02 21:00',price:49,cut:72},
    {id:'e4',title:'Punchlines Live',artist:'Rayan K.',city:'Paris',genre:'Humour',when:'2025-09-20 20:30',price:44,cut:64},
    {id:'e5',title:'Classic Stars',artist:'Clair de Lune',city:'Bordeaux',genre:'Famille',when:'2025-12-15 18:00',price:48,cut:70},
    {id:'e6',title:'Pulse Festival',artist:'Various',city:'Nice',genre:'√âlectro',when:'2025-09-27 17:00',price:69,cut:95},
    {id:'e7',title:'Noir & Lumi√®re',artist:'√âCLIPSE',city:'Toulouse',genre:'Rap',when:'2025-09-18 20:00',price:58,cut:84},
    {id:'e8',title:'Les Impros d‚ÄôOr',artist:'Troupe Envol',city:'Nantes',genre:'Th√©√¢tre',when:'2025-09-22 20:00',price:36,cut:52},
  ];

  // Render cartes
  function renderCards(){
    const host = $('#cards'); host.innerHTML='';
    const frag = document.createDocumentFragment();
    EVENTS.forEach(ev=>{
      const card = document.createElement('article');
      card.className='card';
      card.innerHTML = `
        <div class="card__media" role="img" aria-label="Affiche abstraite pour ${ev.title}"></div>
        <div class="card__body">
          <div style="display:flex;justify-content:space-between;align-items:center">
            <strong>${ev.title}</strong>
            <span class="badge">${ev.genre}</span>
          </div>
          <div style="color:var(--muted);font-size:14px">${ev.artist} ‚Äî ${ev.city} ¬∑ ${ev.when}</div>
          <div style="margin:6px 0 0">
            <span class="price">${euro(ev.price)}</span>
            <span class="old">${euro(ev.cut)}</span>
          </div>
          <div class="cta">
            <button class="btn btn--brand add" data-id="${ev.id}">Ajouter au panier</button>
            <button class="btn btn--ghost">Voir</button>
          </div>
        </div>`;
      frag.appendChild(card);
    });
    host.appendChild(frag);
  }

  // Mega menu toggle
  const megaBtn = $('#megaBtn'), mega = $('#mega');
  megaBtn.addEventListener('click', ()=>{
    const open = !mega.classList.contains('open');
    mega.classList.toggle('open', open);
    megaBtn.setAttribute('aria-expanded', String(open));
  });
  document.addEventListener('keydown', (e)=>{ if(e.key==='Escape'){ mega.classList.remove('open'); megaBtn.setAttribute('aria-expanded','false'); } });
  document.addEventListener('click', (e)=>{
    if(!mega.contains(e.target) && e.target!==megaBtn){ mega.classList.remove('open'); megaBtn.setAttribute('aria-expanded','false'); }
  });

  // Recherche (simu filtre)
  $('#searchForm').addEventListener('submit', (e)=>{
    e.preventDefault();
    const q = ($('#q').value||'').toLowerCase();
    const cat = $('#cat').value;
    const res = EVENTS.filter(ev=>{
      const hay = (ev.title+' '+ev.artist+' '+ev.city+' '+ev.genre).toLowerCase();
      const okQ = !q || hay.includes(q);
      const okC = !cat || ev.genre===cat;
      return okQ && okC;
    });
    // petit feedback
    $('#cards').innerHTML = `<div class="card" style="grid-column:span 12;padding:12px;text-align:center">R√©sultats : <strong>${res.length}</strong></div>`;
    setTimeout(()=>{ EVENTS.splice(0,EVENTS.length,...res); renderCards(); bindCart(); }, 150);
  });

  // Panier ‚Äúvivant‚Äù
  let CART_COUNT = 0;
  function bindCart(){
    $$('.add').forEach(btn=>{
      btn.addEventListener('click', ()=>{
        CART_COUNT++; $('#cartBadge').textContent = String(CART_COUNT);
        btn.textContent='Ajout√© !';
        setTimeout(()=> btn.textContent='Ajouter au panier', 900);
      });
    });
  }

  // Th√®me
  const theme = $('#theme');
  function setTheme(mode){ document.documentElement.setAttribute('data-theme',mode); theme.setAttribute('aria-pressed', String(mode==='dark')); localStorage.setItem('theme', mode); }
  setTheme(localStorage.getItem('theme') || 'light');
  theme.addEventListener('click', ()=> setTheme(document.documentElement.getAttribute('data-theme')==='dark'?'light':'dark'));

  // Init
  $('#year').textContent = new Date().getFullYear();
  renderCards(); bindCart();
  </script>
</body>
</html>